import{l as F,j as Ie,i as ne,I as ee,J as $e,K as Ae,L as Le,d as G,e as P,s as Me,E as ae,_ as Q,M as Be,g as Re,N as oe,w as re,F as Ne}from"./base.7f9fbc65.js";import{E as Oe}from"./el-card.78c75977.js";import{E as ze}from"./el-button.af5a0551.js";import{a6 as Ve,p as ie,i as He,a7 as Ye,aF as Ue,H as W,aK as _e,w as J,m as Ke,N as j,d as K,f as m,J as E,aL as Xe,D as te,B as I,o as g,g as $,x as z,a5 as b,k as t,ad as de,b as p,c as _,af as qe,ag as D,ae as x,ao as ue,aa as se,r as k,C as Fe,aM as Ge,q as We,n as je,a9 as Pe,a2 as Je,am as ce,an as fe,K as Ze,aE as Qe,ah as me,av as pe,e as O,I as xe,u as le,_ as eo,ac as ve}from"./index.91ef4e92.js";import{g as oo,b as ye,F as to,u as so,E as be}from"./focus-trap.8ae7ed66.js";import{U as Ce}from"./event.63ee1cda.js";import{u as Z}from"./index.595f45d8.js";const lo=(...e)=>o=>{e.forEach(s=>{Ve(s)?s(o):s.value=o})};var q=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(q||{});const ge=Symbol("dialogInjectionKey"),no=(e,o,s)=>{let r={offsetX:0,offsetY:0};const d=n=>{const u=n.clientX,v=n.clientY,{offsetX:f,offsetY:C}=r,l=e.value.getBoundingClientRect(),y=l.left,A=l.top,V=l.width,H=l.height,Y=document.documentElement.clientWidth,R=document.documentElement.clientHeight,U=-y+f,N=-A+C,L=Y-y-V+f,M=R-A-H+C,w=i=>{const h=Math.min(Math.max(f+i.clientX-u,U),L),S=Math.min(Math.max(C+i.clientY-v,N),M);r={offsetX:h,offsetY:S},e.value.style.transform=`translate(${F(h)}, ${F(S)})`},B=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",B)},c=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",d)},a=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",d)};ie(()=>{He(()=>{s.value?c():a()})}),Ye(()=>{a()})},ao=e=>{Ue(e)||Ie("[useLockscreen]","You need to pass a ref param to this function");const o=W("popup"),s=_e(()=>o.bm("parent","hidden"));if(!ne||ee(document.body,s.value))return;let r=0,d=!1,c="0";const a=()=>{Le(document.body,s.value),d&&(document.body.style.width=c)};J(e,n=>{if(!n){a();return}d=!ee(document.body,s.value),d&&(c=document.body.style.width),r=oo(o.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,v=$e(document.body,"overflowY");r>0&&(u||v==="scroll")&&d&&(document.body.style.width=`calc(100% - ${r}px)`),Ae(document.body,s.value)}),Ke(()=>a())},Ee=e=>{if(!e)return{onClick:j,onMousedown:j,onMouseup:j};let o=!1,s=!1;return{onClick:a=>{o&&s&&e(a),o=s=!1},onMousedown:a=>{o=a.target===a.currentTarget},onMouseup:a=>{s=a.target===a.currentTarget}}},ro=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:P([String,Array,Object])},zIndex:{type:P([String,Number])}}),io={click:e=>e instanceof MouseEvent};var uo=K({name:"ElOverlay",props:ro,emits:io,setup(e,{slots:o,emit:s}){const r=W("overlay"),d=u=>{s("click",u)},{onClick:c,onMousedown:a,onMouseup:n}=Ee(e.customMaskEvent?void 0:d);return()=>e.mask?m("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:a,onMouseup:n},[E(o,"default")],q.STYLE|q.CLASS|q.PROPS,["onClick","onMouseup","onMousedown"]):Xe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(o,"default")])}});const we=uo,he=G({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Me},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),co={close:()=>!0},fo=["aria-label"],mo=["id"],po={name:"ElDialogContent"},vo=K({...po,props:he,emits:co,setup(e){const o=e,{t:s}=ye(),{Close:r}=Be,{dialogRef:d,headerRef:c,bodyId:a,ns:n,style:u}=te(ge),{focusTrapRef:v}=te(to),f=lo(v,d),C=I(()=>o.draggable);return no(d,c,C),(l,y)=>(g(),$("div",{ref:t(f),class:b([t(n).b(),t(n).is("fullscreen",l.fullscreen),t(n).is("draggable",t(C)),t(n).is("align-center",l.alignCenter),{[t(n).m("center")]:l.center},l.customClass]),style:x(t(u)),tabindex:"-1",onClick:y[1]||(y[1]=ue(()=>{},["stop"]))},[z("header",{ref_key:"headerRef",ref:c,class:b(t(n).e("header"))},[E(l.$slots,"header",{},()=>[z("span",{role:"heading",class:b(t(n).e("title"))},de(l.title),3)]),l.showClose?(g(),$("button",{key:0,"aria-label":t(s)("el.dialog.close"),class:b(t(n).e("headerbtn")),type:"button",onClick:y[0]||(y[0]=A=>l.$emit("close"))},[m(t(ae),{class:b(t(n).e("close"))},{default:p(()=>[(g(),_(qe(l.closeIcon||t(r))))]),_:1},8,["class"])],10,fo)):D("v-if",!0)],2),z("div",{id:t(a),class:b(t(n).e("body"))},[E(l.$slots,"default")],10,mo),l.$slots.footer?(g(),$("footer",{key:0,class:b(t(n).e("footer"))},[E(l.$slots,"footer")],2)):D("v-if",!0)],6))}});var yo=Q(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ke=G({...he,appendToBody:{type:Boolean,default:!1},beforeClose:{type:P(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Se={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ce]:e=>Re(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Te=(e,o)=>{const r=je().emit,{nextZIndex:d}=so();let c="";const a=se(),n=se(),u=k(!1),v=k(!1),f=k(!1),C=k(e.zIndex||d());let l,y;const A=Fe("namespace",Ge),V=I(()=>{const T={},X=`--${A.value}-dialog`;return e.fullscreen||(e.top&&(T[`${X}-margin-top`]=e.top),e.width&&(T[`${X}-width`]=F(e.width))),T}),H=I(()=>e.alignCenter?{display:"flex"}:{});function Y(){r("opened")}function R(){r("closed"),r(Ce,!1),e.destroyOnClose&&(f.value=!1)}function U(){r("close")}function N(){y==null||y(),l==null||l(),e.openDelay&&e.openDelay>0?{stop:l}=oe(()=>B(),e.openDelay):B()}function L(){l==null||l(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=oe(()=>i(),e.closeDelay):i()}function M(){function T(X){X||(v.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(T):L()}function w(){e.closeOnClickModal&&M()}function B(){!ne||(u.value=!0)}function i(){u.value=!1}function h(){r("openAutoFocus")}function S(){r("closeAutoFocus")}e.lockScroll&&ao(u);function De(){e.closeOnPressEscape&&M()}return J(()=>e.modelValue,T=>{T?(v.value=!1,N(),f.value=!0,C.value=e.zIndex?C.value++:d(),We(()=>{r("open"),o.value&&(o.value.scrollTop=0)})):u.value&&L()}),J(()=>e.fullscreen,T=>{!o.value||(T?(c=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=c)}),ie(()=>{e.modelValue&&(u.value=!0,f.value=!0,N())}),{afterEnter:Y,afterLeave:R,beforeLeave:U,handleClose:M,onModalClick:w,close:L,doClose:i,onOpenAutoFocus:h,onCloseAutoFocus:S,onCloseRequested:De,titleId:a,bodyId:n,closed:v,style:V,overlayDialogStyle:H,rendered:f,visible:u,zIndex:C}},bo=["aria-label","aria-labelledby","aria-describedby"],Co={name:"ElDialog",inheritAttrs:!1},go=K({...Co,props:ke,emits:Se,setup(e,{expose:o}){const s=e,r=Pe();Z({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},I(()=>!!r.title)),Z({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},I(()=>!!s.customClass));const d=W("dialog"),c=k(),a=k(),n=k(),{visible:u,titleId:v,bodyId:f,style:C,overlayDialogStyle:l,rendered:y,zIndex:A,afterEnter:V,afterLeave:H,beforeLeave:Y,handleClose:R,onModalClick:U,onOpenAutoFocus:N,onCloseAutoFocus:L,onCloseRequested:M}=Te(s,c);Je(ge,{dialogRef:c,headerRef:a,bodyId:f,ns:d,rendered:y,style:C});const w=Ee(U),B=I(()=>s.draggable&&!s.fullscreen);return o({visible:u,dialogContentRef:n}),(i,h)=>(g(),_(pe,{to:"body",disabled:!i.appendToBody},[m(me,{name:"dialog-fade",onAfterEnter:t(V),onAfterLeave:t(H),onBeforeLeave:t(Y),persisted:""},{default:p(()=>[ce(m(t(we),{"custom-mask-event":"",mask:i.modal,"overlay-class":i.modalClass,"z-index":t(A)},{default:p(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":i.title||void 0,"aria-labelledby":i.title?void 0:t(v),"aria-describedby":t(f),class:b(`${t(d).namespace.value}-overlay-dialog`),style:x(t(l)),onClick:h[0]||(h[0]=(...S)=>t(w).onClick&&t(w).onClick(...S)),onMousedown:h[1]||(h[1]=(...S)=>t(w).onMousedown&&t(w).onMousedown(...S)),onMouseup:h[2]||(h[2]=(...S)=>t(w).onMouseup&&t(w).onMouseup(...S))},[m(t(be),{loop:"",trapped:t(u),"focus-start-el":"container",onFocusAfterTrapped:t(N),onFocusAfterReleased:t(L),onReleaseRequested:t(M)},{default:p(()=>[t(y)?(g(),_(yo,Ze({key:0,ref_key:"dialogContentRef",ref:n},i.$attrs,{"custom-class":i.customClass,center:i.center,"align-center":i.alignCenter,"close-icon":i.closeIcon,draggable:t(B),fullscreen:i.fullscreen,"show-close":i.showClose,title:i.title,onClose:t(R)}),Qe({header:p(()=>[i.$slots.title?E(i.$slots,"title",{key:1}):E(i.$slots,"header",{key:0,close:t(R),titleId:t(v),titleClass:t(d).e("title")})]),default:p(()=>[E(i.$slots,"default")]),_:2},[i.$slots.footer?{name:"footer",fn:p(()=>[E(i.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):D("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],46,bo)]),_:3},8,["mask","overlay-class","z-index"]),[[fe,t(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Eo=Q(go,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const wo=re(Eo),ho=G({...ke,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),ko=Se,So=K({name:"ElDrawer",components:{ElOverlay:we,ElFocusTrap:be,ElIcon:ae,Close:Ne},props:ho,emits:ko,setup(e,{slots:o}){Z({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},I(()=>!!o.title));const s=k(),r=k(),d=W("drawer"),{t:c}=ye(),a=I(()=>e.direction==="rtl"||e.direction==="ltr"),n=I(()=>F(e.size));return{...Te(e,s),drawerRef:s,focusStartRef:r,isHorizontal:a,drawerSize:n,ns:d,t:c}}}),To=["aria-label","aria-labelledby","aria-describedby"],Do=["id"],Io=["aria-label"],$o=["id"];function Ao(e,o,s,r,d,c){const a=O("close"),n=O("el-icon"),u=O("el-focus-trap"),v=O("el-overlay");return g(),_(pe,{to:"body",disabled:!e.appendToBody},[m(me,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:p(()=>[ce(m(v,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:p(()=>[m(u,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:p(()=>[z("div",{ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId,class:b([e.ns.b(),e.direction,e.visible&&"open",e.customClass]),style:x(e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize),role:"dialog",onClick:o[1]||(o[1]=ue(()=>{},["stop"]))},[z("span",{ref:"focusStartRef",class:b(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(g(),$("header",{key:0,class:b(e.ns.e("header"))},[e.$slots.title?E(e.$slots,"title",{key:1},()=>[D(" DEPRECATED SLOT ")]):E(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?D("v-if",!0):(g(),$("span",{key:0,id:e.titleId,role:"heading",class:b(e.ns.e("title"))},de(e.title),11,Do))]),e.showClose?(g(),$("button",{key:2,"aria-label":e.t("el.drawer.close"),class:b(e.ns.e("close-btn")),type:"button",onClick:o[0]||(o[0]=(...f)=>e.handleClose&&e.handleClose(...f))},[m(n,{class:b(e.ns.e("close"))},{default:p(()=>[m(a)]),_:1},8,["class"])],10,Io)):D("v-if",!0)],2)):D("v-if",!0),e.rendered?(g(),$("div",{key:1,id:e.bodyId,class:b(e.ns.e("body"))},[E(e.$slots,"default")],10,$o)):D("v-if",!0),e.$slots.footer?(g(),$("div",{key:2,class:b(e.ns.e("footer"))},[E(e.$slots,"footer")],2)):D("v-if",!0)],14,To)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[fe,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Lo=Q(So,[["render",Ao],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Mo=re(Lo);const Bo=K({components:{IPage:xe},setup(){const e=k(!1),{handle:o}=le({editable:{config:{placeholder:"In Dialog"}}}),s=k(!1),{handle:r}=le({editable:{config:{placeholder:"In Drawer"}}});return{dialogVisible:e,dialogHandle:o,drawerVisible:s,drawerHandle:r}}}),Ro=ve("open dialog"),No=ve("open drawer");function Oo(e,o,s,r,d,c){const a=ze,n=Oe,u=O("we-editor"),v=wo,f=Mo,C=O("i-page");return g(),_(C,{title:"\u5728\u5F39\u7A97\u4E2D\u4F7F\u7528"},{default:p(()=>[m(n,{shadow:"never"},{default:p(()=>[m(a,{type:"primary",onClick:o[0]||(o[0]=l=>e.dialogVisible=!0)},{default:p(()=>[Ro]),_:1}),m(a,{type:"primary",onClick:o[1]||(o[1]=l=>e.drawerVisible=!0)},{default:p(()=>[No]),_:1})]),_:1}),m(v,{modelValue:e.dialogVisible,"onUpdate:modelValue":o[2]||(o[2]=l=>e.dialogVisible=l),title:"In Dialog",width:"1000px","append-to-body":""},{default:p(()=>[m(u,{handle:e.dialogHandle},null,8,["handle"])]),_:1},8,["modelValue"]),m(f,{modelValue:e.drawerVisible,"onUpdate:modelValue":o[3]||(o[3]=l=>e.drawerVisible=l),title:"In Drawer",direction:"rtl",size:"75%","append-to-body":""},{default:p(()=>[m(u,{handle:e.drawerHandle},null,8,["handle"])]),_:1},8,["modelValue"])]),_:1})}const Xo=eo(Bo,[["render",Oo]]);export{Xo as default};
